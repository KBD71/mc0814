<script>
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    var player;
    function onYouTubeIframeAPIReady() {
        // The YouTube video ID for Aug 14th from "극동방송" is Wd7Ni-sLagM
        const videoId = 'Wd7Ni-sLagM';
        if (videoId) {
            player = new YT.Player('player', {
                height: '180',
                width: '320',
                videoId: videoId,
                events: {
                    'onStateChange': onPlayerStateChange
                }
            });
        } else {
             const button = document.getElementById('audio-player-button');
             button.onclick = function() {
                 alert('해당 날짜의 오디오 자료를 찾을 수 없습니다. 유튜브 "극동방송" 채널을 확인해주세요.');
             }
        }
    }

    let isPlaying = false;
    const button = document.getElementById('audio-player-button');
    const playerContainer = document.getElementById('youtube-player-container');

    button.addEventListener('click', () => {
        if (!player) {
             alert('해당 날짜의 오디오 자료를 찾을 수 없습니다. 유튜브 "극동방송" 채널을 확인해주세요.');
             return;
        }
        if (isPlaying) {
            player.pauseVideo();
            playerContainer.style.display = 'none';
        } else {
            playerContainer.style.display = 'block';
            player.playVideo();
        }
    });

    function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.PLAYING) {
            button.textContent = '오늘의 말씀듣기 ❚❚';
            isPlaying = true;
        } else {
            button.textContent = '오늘의 말씀듣기 ▶';
            isPlaying = false;
        }
    }
</script>
